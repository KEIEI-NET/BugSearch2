# ドキュメント構造ガイド

## 📂 ドキュメントの整理方針

このプロジェクトでは、ドキュメントを目的別に整理し、見つけやすくメンテナンスしやすい構造にしています。

## 📁 ディレクトリ構造

### ルートディレクトリ
```
/
├── README.md                 # プロジェクト概要とクイックスタート（最重要）
└── CLAUDE.md                # Claude CLI用コンテキスト
```

**ルートに保持するもの**:
- README.md - プロジェクト全体の入り口（セットアップ含む）
- CLAUDE.md - Claude CLI用コンテキスト

**統合済み（削除）**:
- PHP_SUPPORT.md → README.mdに統合（PHPセクション拡充）
- TOPK_WARNING.md → README.mdに統合（トラブルシューティング）
- codex_review_severity_php.py → codex_review_severity.pyに統合

### doc/ - 技術文書
```
doc/
├── TECHNICAL.md              # 技術仕様（v3.0以前）
├── TECHNICAL_v3.md           # 技術仕様 v3.1（並列処理版）
├── DEVELOPMENT.md            # 開発履歴
├── TEST_RESULTS.md           # テスト実行結果
├── TESTING.md                # テスト手順ガイド
├── CI_GUIDE.md               # CI/CD運用ガイド
├── LANGUAGES.md              # 対応言語の詳細
├── architecture.mmd          # アーキテクチャ図（Mermaid）
├── class-diagram.mmd         # クラス図（Mermaid）
├── process-flow.mmd          # 処理フロー図（Mermaid）
├── sequence-diagram.mmd      # シーケンス図（Mermaid）
├── parallel_processing_flow.mmd  # 並列処理フロー図
├── class/                    # クラス図（DrawIO）
│   └── *.drawio
└── flow/                     # フロー図（DrawIO）
    └── *.drawio
```

### doc/guides/ - 運用ガイド
```
doc/guides/
├── GPT5_MIGRATION.md         # GPT-5への移行手順
├── GPT5_STATUS.md            # GPT-5対応状況
├── ENHANCED_ANALYSIS_GUIDE.md # 拡張分析の使い方
├── PERFORMANCE_REPORT.md     # パフォーマンス測定結果
├── README_ANALYSIS.md        # 分析結果の読み方
├── MIGRATION_GUIDE.md        # バージョンアップガイド
├── AGENTS.md                 # リポジトリ運用ルール
└── Todo.md                   # 開発TODO（旧）
```

### doc/changelog/ - 変更履歴
```
doc/changelog/
├── CHANGELOG.md              # 変更履歴（全バージョン）
└── CHANGELOG_v3.md           # v3.1の詳細変更内容
```

### doc/archive/ - アーカイブ
```
doc/archive/
├── 説明.md                   # 旧バージョン比較説明（2024年版）
└── CURRENT_FILES.md          # 旧ファイル一覧
```

**アーカイブの基準**:
- 古いバージョンの説明文書
- 現在使用されていない参考資料
- 歴史的価値はあるが日常的には参照しない文書

## 📝 新規ドキュメント作成ガイドライン

### ルートに配置するドキュメント
以下の条件を**すべて満たす**場合のみ、ルートに配置：
1. プロジェクト全体に関わる重要情報
2. 初めて使うユーザーが最初に読むべき内容
3. 頻繁に参照される（週1回以上）

**例**: README.md, SETUP_GUIDE.md

### doc/ に配置するドキュメント
技術的な詳細や開発者向け情報：
- 技術仕様書
- アーキテクチャ設計
- テスト結果
- 図表（Mermaid, DrawIO）

### doc/guides/ に配置するドキュメント
特定の用途・シナリオ向けガイド：
- 移行ガイド
- パフォーマンスチューニング
- トラブルシューティング
- ベストプラクティス

### doc/changelog/ に配置するドキュメント
バージョン別の変更記録：
- リリースノート
- 変更履歴
- アップグレードガイド

### doc/archive/ に配置するドキュメント
過去のバージョンや参考資料：
- 旧バージョンの説明
- 廃止された機能のドキュメント
- 歴史的な参考資料

## 🔗 README.md のドキュメントリンク

README.mdのドキュメントセクションは以下の構造：

```markdown
## 📚 ドキュメント

### 🚀 クイックスタート
- セットアップガイド
- 重要な注意事項

### 📖 技術文書
- 技術仕様
- CI/CD運用
- 対応言語

### 📊 開発情報
- 開発履歴
- テスト結果

### 📝 ガイド
- 移行ガイド
- 分析ガイド
- 運用ルール
```

## ✅ ドキュメント整理チェックリスト

新規ドキュメント作成時：
- [ ] 適切なディレクトリに配置
- [ ] README.mdにリンク追加（必要な場合）
- [ ] 他のドキュメントとの重複確認
- [ ] ファイル名は明確で検索しやすいか
- [ ] Markdownの構文は正しいか

既存ドキュメント更新時：
- [ ] 情報は最新か
- [ ] 関連ドキュメントも更新したか
- [ ] リンク切れはないか
- [ ] バージョン番号は正しいか

## 🗂️ ファイル命名規則

### 技術文書
- `TECHNICAL.md` - 技術仕様（最新版）
- `TECHNICAL_v3.md` - バージョン別技術仕様

### ガイド
- `<目的>_GUIDE.md` - 例: `SETUP_GUIDE.md`, `CI_GUIDE.md`
- `<機能>_MIGRATION.md` - 移行ガイド

### 変更履歴
- `CHANGELOG.md` - 総合変更履歴
- `CHANGELOG_v<バージョン>.md` - バージョン別詳細

### 結果・レポート
- `<対象>_RESULTS.md` - 例: `TEST_RESULTS.md`
- `<対象>_REPORT.md` - 例: `PERFORMANCE_REPORT.md`

## 🔄 定期メンテナンス

### 月次
- [ ] リンク切れチェック
- [ ] 古い情報の更新
- [ ] アーカイブ候補の確認

### リリース時
- [ ] 変更履歴の更新
- [ ] README.mdのバージョン番号更新
- [ ] 新機能のドキュメント追加
- [ ] 廃止機能のアーカイブ移動

## 📌 重要な原則

1. **単一責任**: 1つのドキュメントは1つのトピックに集中
2. **DRY原則**: 情報の重複を避け、リンクで参照
3. **アクセシビリティ**: 重要な情報はREADMEから2クリック以内
4. **最新性**: 古い情報はアーカイブへ移動
5. **階層化**: 概要 → 詳細 の順で情報を配置

## 🚫 禁止事項

- ルートに5個以上のMDファイルを配置しない
- `doc/` 直下に10個以上のファイルを置かない
- 同じ情報を複数のドキュメントに記載しない
- ファイル名に日本語を使用しない（`説明.md`は例外的にアーカイブに保存）
- バージョン管理されていないドキュメントをルートに置かない

## 最終更新
2025-10-01

このガイドラインに従い、プロジェクトのドキュメントを常に整理された状態に保ちましょう。
