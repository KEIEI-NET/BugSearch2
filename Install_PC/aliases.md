# Claude Code Global Aliases (グローバル設定用)

*バージョン: v4.0.1*
*このファイルはClaudeのグローバル設定に配置されます*

---

## 品質保証ワークフローエイリアス

### `@perfect` - 完全品質保証モード ⭐⭐⭐⭐⭐
**使用例**: `@perfect ユーザー認証機能を実装して`

**実行手順**:
1. **コード実装**: 要件に基づいて実装
2. **静的解析**: サブエージェント実行（debugger, security, review）
3. **品質達成**: 90点以上になるまで改善（目標: 100/100点）
4. **テスト作成**: 包括的なテストスイート作成（test/test_*.py）
5. **テスト実行**: pytest または python で実行
6. **完全検証**: 全テスト合格（100%成功率）まで修正
7. **コミット**: Git commit実行（pushは明示指示まで待機）

**成功条件**:
- ✅ 静的解析: 100/100点（debugger + security + review）
- ✅ テスト: X/X 成功（100%成功率）
- ✅ カバレッジ: 主要機能を網羅
- ✅ セキュリティ: 脆弱性ゼロ

**適用場面**:
- 本番リリース機能
- セキュリティクリティカルなコード
- 長期メンテナンス予定のコード
- エンタープライズグレードの品質が必要

---

### `@tdd` - テスト駆動開発モード ⭐⭐⭐⭐⭐
**使用例**: `@tdd 決済処理ロジックを実装して`

**実行手順**:
1. **要件分析**: 仕様を詳細に理解
2. **テスト設計**: テストケース先行作成
3. **Red**: テスト実行（失敗することを確認）
4. **Green**: テストが通る最小限の実装
5. **Refactor**: コード品質向上
6. **静的解析**: 100/100点達成
7. **最終検証**: 全テスト合格確認
8. **コミット**: Git commit実行（pushは明示指示まで待機）

**成功条件**:
- ✅ Red → Green → Refactor サイクル完了
- ✅ テスト: 100%成功
- ✅ 静的解析: 100/100点
- ✅ 設計: テストファーストで堅牢

**適用場面**:
- 複雑なビジネスロジック
- 要件が明確に定義されている
- リグレッション防止が重要
- 長期的な保守性が必要

---

### `@validate` - 既存コード完全検証 ⭐⭐⭐⭐
**使用例**: `@validate apply_improvements_from_report.py`

**実行手順**:
1. **静的解析**: debugger, security, review 実行
2. **スコア評価**: 90点未満なら改善提案
3. **テスト確認**: テストファイルが存在するか確認
4. **テスト作成**: 存在しない場合は作成
5. **テスト実行**: 全テスト実行
6. **問題修正**: 失敗があれば修正案提示
7. **レポート**: 品質レポート生成

**成功条件**:
- ✅ 静的解析: 90点以上
- ✅ テスト: 存在する場合は100%成功
- ✅ レポート: 改善点を明確化

**適用場面**:
- 既存コードのレビュー
- バグ修正後の検証
- リファクタリング後の確認
- レガシーコードの品質向上

---

### `@quick` - 高速実装モード ⭐
**使用例**: `@quick データ可視化プロトタイプ作成して`

**実行手順**:
1. **コード実装**: 素早く実装
2. **基本確認**: 動作確認のみ
3. **簡易品質**: 静的解析スキップ（または70点以上で許可）
4. **テスト**: スキップ

**成功条件**:
- ✅ 動作する
- ⚠️ 品質保証なし

**注意**:
- ⚠️ プロトタイプ・実験用のみ
- ⚠️ 本番コードには使用しない
- ⚠️ 使い捨てスクリプト向け

**適用場面**:
- PoC（概念実証）
- 一時的なスクリプト
- 調査・実験コード
- データ分析の下書き

---

## エイリアス使用ガイドライン

### 品質レベル比較

```
@quick   (品質: ⭐)       - 動作のみ確認
@validate (品質: ⭐⭐⭐⭐)   - 既存コード検証
@perfect (品質: ⭐⭐⭐⭐⭐) - 新規コード最高品質
@tdd     (品質: ⭐⭐⭐⭐⭐) - テストファースト最高品質
```

### 選択フローチャート

```
本番コードですか？
  YES → 新規実装？
         YES → 複雑なロジック？
                YES → @tdd
                NO  → @perfect
         NO  → @validate
  NO  → プロトタイプ？
         YES → @quick
         NO  → @validate（品質確認推奨）
```

---

## 実践例

### 例1: 新機能開発（本番リリース）
```
@perfect ユーザー登録APIエンドポイントを実装

要件:
- メールアドレス検証
- パスワード強度チェック（8文字以上、大小英数字）
- 重複登録防止
- SQLインジェクション対策
```

### 例2: 複雑なビジネスロジック
```
@tdd 在庫引当ロジックを実装

要件:
- 同時注文の競合防止
- 在庫不足時のエラーハンドリング
- ロールバック処理
- トランザクション管理
```

### 例3: レガシーコード改善
```
@validate old_payment_system.py

目的:
- セキュリティ脆弱性チェック
- テストカバレッジ向上
- 品質スコア90点以上達成
```

### 例4: データ分析スクリプト（使い捨て）
```
@quick CSVファイルから売上推移グラフを生成

要件:
- pandas使用
- matplotlib可視化
- 簡易集計
```

---

## v4.0.1 で追加された背景

### 発見された問題
品質スコア100点でも以下のバグが残った：
- ❌ rollback_from_backup() 関数未実装（インポートエラー）
- ❌ テスト環境での絶対パス拒否
- ❌ Unicode出力エラー（Windows環境）
- ❌ サンプルレポートにシークレット含有

### 根本原因
> **「静的解析100点」≠「バグゼロ」**
>
> 実行テストなしでは実装の完全性は検証できない

### 解決策
`@perfect` = 静的解析100点 + テスト100%成功

これにより：
- ✅ インポートエラー検出
- ✅ 環境依存バグ発見
- ✅ 実行時エラー防止
- ✅ 完全な品質保証

---

## カスタマイズ

このファイルはグローバル設定として機能します。
プロジェクト固有のエイリアスは各プロジェクトの `.claude/aliases.md` に追加してください。

---

*このファイルはClaude Codeのグローバル設定ディレクトリに配置されます*
*配置場所: `~/.config/claude-code/aliases.md` (Linux/Mac) または `%APPDATA%\claude-code\aliases.md` (Windows)*
